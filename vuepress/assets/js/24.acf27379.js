(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{326:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._m(1),a("p",[t._v("æµè§ˆå™¨æœ‰ä¸ªå¼ºå¤§è€Œä¸”ç®€å•çš„API â€”â€” MediaRecorderï¼Œé¡¾åæ€ä¹‰ï¼Œå¯ä»¥ç”¨æ¥å½•åˆ¶éŸ³é¢‘å’Œè§†é¢‘ã€‚\né—²è¯ä¸è¯´ï¼Œå…ˆä¸Šdemo â€”â€”")]),t._m(2),a("Recorder-Demo1"),a("show-in-codepen",{attrs:{href:"https://codepen.io/_tianxia/pen/JayxoG"}}),t._m(3),a("Recorder-Demo2"),a("show-in-codepen",{attrs:{href:"https://codepen.io/_tianxia/pen/gdxqao"}}),a("p",[t._v("çœ‹å®Œdemoï¼Œå†æ¥çœ‹çœ‹æ€ä¹ˆå®ç°å§ â€”â€”")]),t._m(4),a("p",[t._v("APIå¯ä»¥è¯´æ˜¯ç›¸å½“ç®€å•ç²—æš´äº†")]),t._m(5),a("p",[t._v("åˆ›å»ºä¸€ä¸ªæ–°çš„MediaRecorderå¯¹è±¡ï¼Œç”¨æ¥è¿›è¡Œå½•åˆ¶æ“ä½œã€‚")]),a("p",[t._v("ä¸Šé¢çš„demoåªç”¨åˆ°äº†ä¸¤ä¸ªæ–¹æ³•å’Œä¸¤ä¸ªäº‹ä»¶ â€”â€”")]),t._m(6),t._m(7),a("p",[t._v("å¼€å§‹å½•åˆ¶åª’ä½“ã€‚")]),a("p",[t._v("å¯ä»¥è®¾ç½®ä¸€ä¸ªå‚æ•°ï¼Œå½•åˆ¶çš„åª’ä½“ä¼šæŒ‰ç…§è®¾ç½®çš„å€¼è¿›è¡Œåˆ†å‰²æˆä¸€ä¸ªä¸ªå•ç‹¬çš„åŒºå—ï¼Œ è€Œä¸æ˜¯ä»¥é»˜è®¤çš„æ–¹å¼å½•åˆ¶ä¸€ä¸ªéå¸¸å¤§çš„æ•´å—å†…å®¹ã€‚")]),t._m(8),a("p",[t._v("åœæ­¢å½•åˆ¶ï¼ŒåŒæ—¶è§¦å‘dataavailableäº‹ä»¶ï¼Œè¿”å›ä¸€ä¸ªå­˜å‚¨Blobå†…å®¹çš„å½•åˆ¶æ•°æ®ã€‚")]),t._m(9),t._m(10),a("p",[t._v("å½•åˆ¶å¼€å§‹æ—¶è§¦å‘")]),t._m(11),a("p",[t._v("å½•åˆ¶ç»“æŸæ—¶è§¦å‘")]),t._m(12),a("p",[t._v("å½•åˆ¶ç»“æŸæ—¶åŒæ—¶è§¦å‘ï¼Œäº‹ä»¶å¯¹è±¡ä¸­è¿”å›å½•åˆ¶çš„åª’ä½“æ•°æ®")]),t._m(13),a("p",[t._v("demoä¸­ç”¨åˆ°çš„éƒ¨åˆ†ä»£ç ï¼š")]),a("p",[t._v("è·å–ç”¨æˆ·åª’ä½“æƒé™ï¼Œåˆ›å»ºåª’ä½“å½•åˆ¶å¯¹è±¡ï¼š")]),t._m(14),a("p",[t._v("ç»‘å®šäº‹ä»¶ï¼Œå¤„ç†å½•åˆ¶æ•°æ®ï¼š")]),t._m(15),t._m(16),t._m(17),t._m(18),a("p",[t._v("é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å±æ€§ã€å…¶ä»–çš„æ–¹æ³•å’Œäº‹ä»¶")]),t._m(19),t._m(20),a("p",[t._v("è¿”å›MediaRecorderå¯¹è±¡åˆ›å»ºæ—¶é€‰æ‹©å™¨é€‰æ‹©çš„å½•åˆ¶å®¹å™¨çš„ MIME type")]),t._m(21),a("p",[t._v("è¿”å›å½•åˆ¶å¯¹è±¡MediaRecorderçš„å½“å‰çŠ¶æ€ï¼šinactive(é—²ç½®ä¸­)ã€ recording(å½•åˆ¶ä¸­)ã€ paused(æš‚åœä¸­)")]),t._m(22),a("p",[t._v("è¿”å›å½•åˆ¶å™¨å¯¹è±¡MediaRecorderåˆ›å»ºæ—¶æ„é€ å‡½æ•°ä¼ å…¥çš„streamå¯¹è±¡")]),t._m(23),a("p",[t._v("ç”¨ä»¥æŒ‡å®šMediaRecorderæ˜¯å¦å½•åˆ¶æ— å£°çš„è¾“å…¥æºã€‚å¦‚æœæ˜¯falseï¼Œ ä¼šå½•åˆ¶æ— å£°çš„éŸ³é¢‘æˆ–è€…é»‘å±çš„è§†é¢‘ï¼Œé»˜è®¤å€¼æ˜¯false")]),t._m(24),a("p",[t._v("è¿”å›è§†é¢‘é‡‡ç”¨çš„ç¼–ç ç‡")]),t._m(25),a("p",[t._v("è¿”å›éŸ³é¢‘é‡‡ç”¨çš„ç¼–ç ç‡")]),t._m(26),t._m(27),a("p",[t._v("è¿”å›ä¸€ä¸ªBooleanå€¼ï¼Œæ¥è¡¨ç¤ºè®¾ç½®çš„MIME type æ˜¯å¦è¢«å½“å‰ç”¨æˆ·çš„è®¾å¤‡æ”¯æŒ")]),t._m(28),a("p",[t._v("æš‚åœåª’ä½“å½•åˆ¶")]),t._m(29),a("p",[t._v("ç»§ç»­å½•åˆ¶ä¹‹å‰è¢«æš‚åœçš„å½•åˆ¶åŠ¨ä½œ")]),t._m(30),a("p",[t._v("è¯·æ±‚ä¸€ä¸ªä»å¼€å§‹åˆ°å½“å‰æ¥æ”¶åˆ°çš„ï¼Œå­˜å‚¨ä¸ºBlobç±»å‹çš„å½•åˆ¶å†…å®¹ã€‚\n(æˆ–è€…æ˜¯è¿”å›ä»ä¸Šä¸€æ¬¡è°ƒç”¨requestData() æ–¹æ³•ä¹‹ååˆ°ç°åœ¨çš„å†…å®¹)ã€‚\nè°ƒç”¨è¿™ä¸ªæ–¹æ³•åï¼Œå½•åˆ¶å°†ä¼šç»§ç»­è¿›è¡Œ,ä½†æ˜¯ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Blobå¯¹è±¡")]),t._m(31),t._m(32),a("p",[t._v("å½•åˆ¶å‡ºé”™æ—¶è§¦å‘")]),t._m(33),a("p",[t._v("å½•åˆ¶æš‚åœæ—¶è§¦å‘")]),t._m(34),a("p",[t._v("å½•åˆ¶ç»§ç»­æ—¶è§¦å‘")]),t._m(35),a("p",[t._v("è¿™ä¸ªAPIå¯¹æµè§ˆå™¨çš„è¦æ±‚ä¸ä½ï¼Œç›®å‰æ”¯æŒçš„åªæœ‰é«˜ç‰ˆæœ¬çš„Chrome(49+)å’Œfirfox(61+)ï¼Œå®‰å“ç‰ˆçš„chromeä¹Ÿæ˜¯å¯ä»¥çš„ã€‚")]),a("p",[t._v("éŸ³è§†é¢‘çš„å½•åˆ¶å¯èƒ½ç®€å•ï¼Œä½†æ˜¯åº”ç”¨åœ¨èŠå¤©ä¸­è¿˜æ¶‰åŠåˆ°å¾ˆå¤šé—®é¢˜ï¼Œå¦‚æ•°æ®çš„ä¼ è¾“ã€åŠ å¯†å•¥çš„ï¼Œæƒ³åšæˆåƒå¾®ä¿¡è¿™æ ·çš„å·¥å…·ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šè·¯è¦èµ°ã€‚")]),t._m(36),t._m(37)],1)},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"ç”¨æµè§ˆå™¨è½»æ¾å½•åˆ¶éŸ³é¢‘ã€è§†é¢‘â€”â€”-mediarecorder-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨æµè§ˆå™¨è½»æ¾å½•åˆ¶éŸ³é¢‘ã€è§†é¢‘â€”â€”-mediarecorder-api","aria-hidden":"true"}},[this._v("#")]),this._v(" ç”¨æµè§ˆå™¨è½»æ¾å½•åˆ¶éŸ³é¢‘ã€è§†é¢‘â€”â€” MediaRecorder API")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("a",{attrs:{href:"https://denzel.netlify.com/js/useful_webapis_mediarecorder.html?_=4535626519096512",target:"_blank",rel:"noopener noreferrer"}},[this._v("åŸæ–‡é“¾æ¥")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"demo1-å½•åˆ¶è¯­éŸ³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#demo1-å½•åˆ¶è¯­éŸ³","aria-hidden":"true"}},[this._v("#")]),this._v(" demo1: å½•åˆ¶è¯­éŸ³")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"demo2-å½•åˆ¶è§†é¢‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#demo2-å½•åˆ¶è§†é¢‘","aria-hidden":"true"}},[this._v("#")]),this._v(" demo2: å½•åˆ¶è§†é¢‘")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"ç®€ä»‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç®€ä»‹","aria-hidden":"true"}},[this._v("#")]),this._v(" ç®€ä»‹")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ä¸€ä¸ªæ„é€ å‡½æ•°-mediarecorder"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ä¸ªæ„é€ å‡½æ•°-mediarecorder","aria-hidden":"true"}},[this._v("#")]),this._v(" ä¸€ä¸ªæ„é€ å‡½æ•° MediaRecorder()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ä¸¤ä¸ªæ–¹æ³•startã€stop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸¤ä¸ªæ–¹æ³•startã€stop","aria-hidden":"true"}},[this._v("#")]),this._v(" ä¸¤ä¸ªæ–¹æ³•startã€stop")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"start"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#start","aria-hidden":"true"}},[this._v("#")]),this._v(" start()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"stop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stop","aria-hidden":"true"}},[this._v("#")]),this._v(" stop()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ä¸‰ä¸ªäº‹ä»¶startã€stopã€dataavailable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ä¸ªäº‹ä»¶startã€stopã€dataavailable","aria-hidden":"true"}},[this._v("#")]),this._v(" ä¸‰ä¸ªäº‹ä»¶startã€stopã€dataavailable")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"onstart"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onstart","aria-hidden":"true"}},[this._v("#")]),this._v(" onstart")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"onstop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onstop","aria-hidden":"true"}},[this._v("#")]),this._v(" onstop")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"ondataavailable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ondataavailable","aria-hidden":"true"}},[this._v("#")]),this._v(" ondataavailable")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ä»£ç ç‰‡æ®µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç ç‰‡æ®µ","aria-hidden":"true"}},[this._v("#")]),this._v(" ä»£ç ç‰‡æ®µ")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("requestMediaAccess")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token comment"}},[t._v("//è·å–ç”¨æˆ·åª’ä½“æƒé™ï¼Œè§†é¢‘çš„è¯å‚æ•°{audio: true, video: true}")]),t._v("\n    navigator"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mediaDevices"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getUserMedia")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("audio"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stream "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),a("span",{attrs:{class:"token comment"}},[t._v("//åˆ›å»ºåª’ä½“å½•åˆ¶å¯¹è±¡")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("recorder "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("window"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MediaRecorder")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stream"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("bindEvents")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token function"}},[t._v("alert")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'å‡ºé”™ï¼Œè¯·ç¡®ä¿å·²å…è®¸æµè§ˆå™¨è·å–å½•éŸ³æƒé™'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("bindEvents")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("recorder"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ondataavailable "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getRecordingData"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("recorder"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onstop "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("saveRecordingData"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n"),a("span",{attrs:{class:"token function"}},[t._v("getRecordingData")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{attrs:{class:"token comment"}},[t._v("//å½•åˆ¶çš„æ•°æ®")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chunks"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("push")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//ä¿å­˜éŸ³é¢‘æ•°æ®")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("saveRecordingData")]),t._v("  "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" blob "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Blob")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chunks"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'type'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'audio/ogg; codecs=opus'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        audioStream "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("URL")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createObjectURL")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("//ä¼°ç®—æ—¶é•¿")]),t._v("\n        duration "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("parseInt")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("6600")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("duration "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token function"}},[t._v("alert")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'è¯´è¯æ—¶é—´å¤ªçŸ­'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("duration "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("60")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        duration "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("60")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chunkList"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("push")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("duration"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" duration"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stream"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" audioStream"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chunks "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//è§†é¢‘çš„è¯ï¼šä¿å­˜è§†é¢‘æ•°æ®")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("saveRecordingData")]),t._v("  "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" blob "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Blob")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chunks"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'type'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'video/webm'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        videoStream "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("URL")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createObjectURL")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chunkList"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("push")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("stream"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" videoStream"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("onCapture")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        \n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chunks "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//è§†é¢‘ï¼šè·å–è§†é¢‘æˆªå›¾")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("onCapture")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" item "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chunkList"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("drawImage")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("video"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("toBlob")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" src "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("URL")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createObjectURL")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'poster'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" src"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("//ç´¢å¼•åç§»")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index "),a("span",{attrs:{class:"token operator"}},[t._v("++")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("//éšè—video")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("showVideo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("video"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("srcObject "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("æ³¨æ„")]),s("p",[this._v("ä¼°ç®—æ—¶é•¿é‚£å—æ˜¯æˆ‘æ‹è„‘è¢‹çå¼„çš„ğŸ˜‚ ã€‚å› ä¸ºå®åœ¨ä¸çŸ¥é“æ€ä¹ˆè·å–ï¼Œè²Œä¼¼åªæœ‰ç»™éŸ³é¢‘èµ‹å€¼srcåæ‰èƒ½è·å–åˆ°æ—¶é•¿durationï¼Œ\nä½†æˆ‘è¯•è¿‡å‡ ä¸ªåŠæ³•è¿˜æ˜¯æ— æµäºäº‹...è¿˜æœ›æœ‰ç»éªŒçš„å¤§ä½¬ç•¥æŒ‡ç‚¹ä¸€äºŒ ğŸ™ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("å…·ä½“ä»£ç å¯ä»¥çœ‹codepenï¼Œ"),s("a",{attrs:{href:"https://codepen.io/_tianxia/pen/JayxoG",target:"_blank",rel:"noopener noreferrer"}},[this._v("demo1")]),this._v("ã€ "),s("a",{attrs:{href:"https://codepen.io/_tianxia/pen/gdxqao",target:"_blank",rel:"noopener noreferrer"}},[this._v("demo2")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"å…¶ä»–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–","aria-hidden":"true"}},[this._v("#")]),this._v(" å…¶ä»–")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"å±æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å±æ€§","aria-hidden":"true"}},[this._v("#")]),this._v(" å±æ€§")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("mimeType")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("state")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("stream")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("ignoreMutedMedia")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("videoBitsPerSecond")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("audioBitsPerSecond")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"æ–¹æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ³•","aria-hidden":"true"}},[this._v("#")]),this._v(" æ–¹æ³•")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("isTypeSupported()")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("pause()")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("resume()")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("requestData()")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"äº‹ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äº‹ä»¶","aria-hidden":"true"}},[this._v("#")]),this._v(" äº‹ä»¶")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("onerror")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("onpause")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("onresume")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“","aria-hidden":"true"}},[this._v("#")]),this._v(" æ€»ç»“")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™","aria-hidden":"true"}},[this._v("#")]),this._v(" å‚è€ƒèµ„æ–™")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_Recording_API",target:"_blank",rel:"noopener noreferrer"}},[this._v("MediaStream Recording API")])]),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder",target:"_blank",rel:"noopener noreferrer"}},[this._v("MediaRecorder")])]),s("li",[s("a",{attrs:{href:"https://addpipe.com/blog/mediarecorder-api/",target:"_blank",rel:"noopener noreferrer"}},[this._v("HTML5â€™s Media Recorder API in Action on Chrome and Firefox")])])])}],!1,null,null,null);s.default=e.exports}}]);