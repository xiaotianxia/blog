(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{329:function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},330:function(t,n,s){t.exports=s(331)},331:function(t,n,s){s(332),t.exports=s(2).parseInt},332:function(t,n,s){var i=s(3),e=s(333);i(i.G+i.F*(parseInt!=e),{parseInt:e})},333:function(t,n,s){var i=s(5).parseInt,e=s(334).trim,o=s(329),a=/^[-+]?0[xX]/;t.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(t,n){var s=e(String(t),3);return i(s,n>>>0||(a.test(s)?16:10))}:i},334:function(t,n,s){var i=s(3),e=s(83),o=s(25),a=s(329),r="["+a+"]",u=RegExp("^"+r+r+"*"),c=RegExp(r+r+"*$"),d=function(t,n,s){var e={},r=o(function(){return!!a[t]()||"​"!="​"[t]()}),u=e[t]=r?n(h):a[t];s&&(e[s]=u),i(i.P+i.F*r,"String",e)},h=d.trim=function(t,n){return t=String(e(t)),1&n&&(t=t.replace(u,"")),2&n&&(t=t.replace(c,"")),t};t.exports=d},387:function(t,n,s){},467:function(t,n,s){"use strict";var i=s(387);s.n(i).a},520:function(t,n,s){"use strict";s.r(n);var i=s(330),e=s.n(i),o=(s(59),s(82),{data:function(){return{chunks:[],chunkList:[],btnText:"按住说话"}},methods:{requestMediaAccess:function(){var t=this;navigator.mediaDevices.getUserMedia({audio:!0}).then(function(n){t.recorder=new window.MediaRecorder(n),t.bindEvents()},function(t){alert("出错，请确保已允许浏览器获取录音权限")})},onMousedown:function(t){this.onStart(),this.btnText="松开结束"},onMouseup:function(){this.onStop(),this.btnText="按住说话"},onStart:function(){this.recorder.start()},onStop:function(){this.recorder.stop()},onPlay:function(t){var n=this;this.chunkList.forEach(function(t){n.$set(t,"wink",!1)});var s=this.chunkList[t];this.audio.src=s.stream,this.audio.play(),this.bindAudioEvent(t)},bindAudioEvent:function(t){var n=this,s=this.chunkList[t];this.audio.onplaying=function(){n.$set(s,"wink",!0)},this.audio.onended=function(){n.$set(s,"wink",!1)}},bindEvents:function(){this.recorder.ondataavailable=this.getRecordingData,this.recorder.onstop=this.saveRecordingData},getRecordingData:function(t){this.chunks.push(t.data)},saveRecordingData:function(){var t=new Blob(this.chunks,{type:"audio/ogg; codecs=opus"}),n=URL.createObjectURL(t),s=e()(t.size/6600);s<=0?alert("说话时间太短"):(s>60&&(s=60),this.chunkList.push({duration:s,stream:n}),this.msgList.scrollBy&&this.msgList.scrollBy({top:200,left:0,behavior:"smooth"}),this.chunks=[])}},mounted:function(){navigator.mediaDevices?window.MediaRecorder?(this.audio=this.$refs.audio,this.msgList=document.querySelector(".js-msg-list"),this.requestMediaAccess()):alert("您的浏览器不支持录音"):alert("您的浏览器不支持获取用户设备")}}),a=(s(467),s(12)),r=Object(a.a)(o,function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"recorder-wrapper"},[s("div",{staticClass:"phone"},[s("div",{staticClass:"phone-body"},[t._m(0),t._v(" "),s("div",{staticClass:"phone-content"},[s("transition-group",{staticClass:"js-msg-list msg-list",attrs:{tag:"ul",name:"fade"}},[s("li",{key:-1,staticClass:"msg eg"},[s("div",{staticClass:"avatar"}),t._v(" "),s("div",{staticClass:"audio"},[t._v("说话")])]),t._v(" "),t._l(t.chunkList,function(n,i){return s("li",{key:i,staticClass:"msg",on:{click:function(n){return t.onPlay(i)},touchend:function(n){return n.preventDefault(),t.onPlay(i)}}},[s("div",{staticClass:"avatar"}),t._v(" "),s("div",{staticClass:"audio",class:{wink:n.wink},style:{width:20*n.duration+"px"}},[s("span",[t._v("(")]),s("span",[t._v("(")]),s("span",[t._v("(")])]),t._v(" "),s("div",{staticClass:"duration"},[t._v(t._s(n.duration)+'"')])])})],2)],1),t._v(" "),s("div",{staticClass:"phone-operate",on:{mousedown:t.onMousedown,touchstart:function(n){return n.preventDefault(),t.onMousedown(n)},mouseup:t.onMouseup,touchend:function(n){return n.preventDefault(),t.onMouseup(n)}}},[t._v(t._s(t.btnText))])])]),t._v(" "),s("audio",{ref:"audio"})])},[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"phone-head"},[n("span",[this._v("< 微信(66)")]),this._v(" "),n("span",[this._v("哈哈哈")]),this._v(" "),n("span",[this._v("···")])])}],!1,null,"7c1995b8",null);n.default=r.exports}}]);