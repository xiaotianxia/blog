(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{480:function(t,e,n){t.exports=n.p+"assets/img/blogeditable.1bf04cf3.gif"},679:function(t,e,n){"use strict";n.r(e);var s=n(12),a=Object(s.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"可编辑的页面——designmode、contenteditable和user-modify"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可编辑的页面——designmode、contenteditable和user-modify","aria-hidden":"true"}},[t._v("#")]),t._v(" 可编辑的页面——designMode、contenteditable和user-modify")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://xiaotianxia.github.io/blog/vuepress/js/editable_dom.html?_=5432542436436543",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介","aria-hidden":"true"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("p",[t._v("前几天想研究一下富文本编辑器，发现这玩意涉及的知识点和“坑”还真不少。\n谁知道在查阅资料时还有一些额外的收获😄 。")]),t._v(" "),s("p",[t._v("于是，今天不谈富文本编辑器，而是一起学一下跟它相关的几个神奇的属性。\n或许好多同学跟我一样，还从没见过，它们分别是："),s("strong",[t._v("isContentEditable")]),t._v("、"),s("strong",[t._v("designMode")]),t._v("、"),s("strong",[t._v("user-modify")]),t._v("\n和几乎人人都知道的"),s("strong",[t._v("contenteditable")]),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"iscontenteditable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#iscontenteditable","aria-hidden":"true"}},[t._v("#")]),t._v(" isContentEditable")]),t._v(" "),s("p",[t._v("很简单，一个只读的属性，返回true或false，表示页面元素是否可编辑。")]),t._v(" "),s("h2",{attrs:{id:"designmode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#designmode","aria-hidden":"true"}},[t._v("#")]),t._v(" designMode")]),t._v(" "),s("p",[t._v("是document的一个全局开关，可读可写，有两个值：“on”、“off”，表示"),s("strong",[t._v("整个页面")]),t._v("是否可编辑。一般情况下，document.designMode返回是off。\n可以手动设置’开‘或者’关‘，不妨自己试一下，在console里输入:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("designMode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'on'")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("再用鼠标点一点页面，是不是发现了神奇的现象？！")]),t._v(" "),s("p",[t._v("参考下图：\n"),s("img",{attrs:{src:n(480),alt:"示意图"}}),t._v("\n整个页面都变成了可编辑状态。\n这时候，所有元素的isContentEditable属性都变成了true：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isContentEditable   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//true")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isContentEditable   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//true")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#id'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isContentEditable   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//true")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h2",{attrs:{id:"user-modify"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-modify","aria-hidden":"true"}},[t._v("#")]),t._v(" user-modify")]),t._v(" "),s("p",[t._v("这家伙是一个CSS属性！但其功能不可小觑，是CSS版的contenteditable。")]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v("user-modify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" read-only"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   //只读\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("user-modify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" read-write"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  //读写，支持富文本\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("user-modify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" write-only"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  //只写？！ 什么鬼，不知道啥意思\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("user-modify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" read-write-plaintext-only"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  //读写，但只可输入文本\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("直接看张鑫旭大大的"),s("a",{attrs:{href:"http://www.zhangxinxu.com/study/201601/user-modify.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),s("OutboundLink")],1),t._v("吧。")]),t._v(" "),s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("但这时候，isContentEditable是检测不到的该元素是否可编辑的")])]),t._v(" "),s("h2",{attrs:{id:"contenteditable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#contenteditable","aria-hidden":"true"}},[t._v("#")]),t._v(" contenteditable")]),t._v(" "),s("p",[t._v("前两个属性都存在很大的缺点，designMode是针对整个document的，对于想做到模块化的编辑器的实现是很难得，\nuser-modify的兼容性更是经不起太多的考验。")]),t._v(" "),s("p",[t._v("那么就只剩下contenteditable了，这是大多数浏览器都能兼容的。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("contenteditable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//与contenteditable="true"效果一样')]),t._v("\ncontenteditable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"events"')]),t._v("\ncontenteditable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"caret"')]),t._v("\ncontenteditable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typing"')]),t._v("\ncontenteditable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"plaintext-only"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可编辑，只允许纯文本")]),t._v("\ncontenteditable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v("\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可编辑，支持富文本")]),t._v("\ncontenteditable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//不可编辑")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v('"events"、"caret"、"typing"看了半天'),s("a",{attrs:{href:"https://w3c.github.io/editing/contentEditable.html#contenteditable",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),s("OutboundLink")],1),t._v("也没搞清楚啥意思，而且貌似现在的浏览器也不支持。\n可以自己试下：点"),s("a",{attrs:{href:"http://www.w3school.com.cn/tiy/t.asp?f=html5_global_contenteditable",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1),t._v("。有知道的大神还望指导一下下🙏 ~")]),t._v(" "),s("h2",{attrs:{id:"demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#demo","aria-hidden":"true"}},[t._v("#")]),t._v(" demo:")]),t._v(" "),s("Editor-ContenteditableTest"),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("只是蜻蜓点水般的介绍，具体细节没有深究。后续的文章会就与contenteditable有关的几个对象展开学习。")]),t._v(" "),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/isContentEditable",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTMLElement.isContentEditable"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Document/designMode",target:"_blank",rel:"noopener noreferrer"}},[t._v("Document.designMode"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://w3c.github.io/editing/contentEditable.html#contenteditable",target:"_blank",rel:"noopener noreferrer"}},[t._v("ContentEditable"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.zhangxinxu.com/wordpress/2016/01/contenteditable-plaintext-only/",target:"_blank",rel:"noopener noreferrer"}},[t._v("小tip: 如何让contenteditable元素只能输入纯文本"),s("OutboundLink")],1)])])],1)},[],!1,null,null,null);e.default=a.exports}}]);